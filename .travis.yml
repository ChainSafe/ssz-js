language: node_js
node_js:
- lts/*
cache: yarn
jobs:
  include:
 # - stage: Lint & Unit Tests
 #   script:
 #  - yarn run lint
 #  - yarn test:unit
 #- stage: Spec Tests
 #  script:
 #  - "./scripts/ci-install-spec-test-dependencies.sh"
 #  - yarn test:spec
  - stage: Compile Artifacts
    script:
    - yarn install
    - yarn run build
    - sh devops/artifacts.sh
before_deploy: yarn build:docs
deploy:
    #    - provider: pages
    # skip_cleanup: true
    # github_token: $GH_PAGES_TOKEN
    # keep_history: true
    # local_dir: docs
    # on:
    #     branch: master
    provider: releases
    api_key: $GH_PAGES_TOKEN
    file: "./artifacts/"
    draft: true
    on:
    # repo: ChainSafe/ssz-js
      branch: greg/devops/auto-release
